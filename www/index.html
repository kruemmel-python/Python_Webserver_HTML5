<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Beispiel Webseite</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>Beispiel Webseite</h1>
        <nav>
            <ul>
                <li><a href="#home">Home</a></li>
                <li><a href="#about">Über uns</a></li>
                <li><a href="#services">Dienstleistungen</a></li>
                <li><a href="#contact">Kontakt</a></li>
                <li><a href="#file-upload-section">Dateien</a></li>
				<li><a href="java.html">Java Code testen</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="home">
            <h2>Willkommen</h2>
            <p>Dies ist die Startseite.</p>
        </section>

        <section id="about">
            <h2>Über uns</h2>
            <p>Informationen über unsere Firma.</p>
        </section>

        <section id="services">
            <h2>Dienstleistungen</h2>
            <p>Informationen über unsere Dienstleistungen.</p>
        </section>

        <section id="contact">
            <h2>Kontakt</h2>
            <p>Kontaktieren Sie uns für weitere Informationen.</p>
        </section>

        <!-- Datei Upload und Download -->
        <section id="file-upload-section">
            <h2>Datei-Upload und -Download</h2>
            <div>
                <!-- Datei-Upload-Formular -->
                <form id="upload-form" enctype="multipart/form-data">
                    <label for="file-upload-input">Wählen Sie eine Datei zum Hochladen:</label>
                    <input type="file" id="file-upload-input" name="file">
                    <button type="button" onclick="uploadFile()">Datei hochladen</button>
                </form>
                <p id="upload-status"></p>
            </div>

            <div>
                <!-- Verfügbare Dateien anzeigen und herunterladen -->
                <h3>Verfügbare Dateien zum Download</h3>
                <ul id="file-list"></ul>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; 2023 Beispiel Webseite</p>
    </footer>

    <script>
        function uploadFile() {
            const fileInput = document.getElementById('file-upload-input'); // geänderte ID
            const statusText = document.getElementById('upload-status');
            const formData = new FormData();
            formData.append('file', fileInput.files[0]);

            fetch('/upload', {
                method: 'POST',
                body: formData
            })
            .then(response => response.text())
            .then(result => {
                statusText.textContent = 'Upload erfolgreich: ' + result;
                fileInput.value = ''; // Datei-Input zurücksetzen
                loadFileList(); // Datei-Liste aktualisieren
            })
            .catch(error => {
                statusText.textContent = 'Upload fehlgeschlagen: ' + error;
            });
        }

        function loadFileList() {
            fetch('/file-list')
            .then(response => response.json())
            .then(files => {
                const fileList = document.getElementById('file-list');
                fileList.innerHTML = ''; // Datei-Liste zurücksetzen

                files.forEach(file => {
                    const listItem = document.createElement('li');
                    const link = document.createElement('a');
                    link.href = '/downloads/' + file;
                    link.innerText = file;
                    listItem.appendChild(link);
                    fileList.appendChild(listItem);
                });
            })
            .catch(error => console.error('Fehler beim Laden der Datei-Liste:', error));
        }

        // Datei-Liste beim Laden der Seite anzeigen
        window.onload = loadFileList;
    </script>
</body>
</html>
